---
version: 3
projects:
 - dir: terraform-gcp
   workflow: testing
workflows:
  testing:
    plan:
      steps:
        - run: "printf 'print getting started: $PLANFILE $WORKSPACE $DIR  $HEAD_COMMIT $HEAD_BRANCH_NAME $PULL_NUM $PROJECT_NAME $HEAD_REPO_OWNER $HEAD_BRANCH_NAME $ATLANTIS_TERRAFORM_VERSION'"
        - run: "echo $DIR, $WORKSPACE, $HEAD_COMMIT, $PULL_NUM, $PROJECT_NAME, $HEAD_BRANCH_NAME""
        - init
        - run: "terraform plan -input=false -refresh -out $PLANFILE"
        - run: "terraform show -json $PLANFILE > $SHOWFILE"
        - run: "soluble ea terraform-plan-scan --plan $SHOWFILE"
        - run: "printf 'print meeee'"
